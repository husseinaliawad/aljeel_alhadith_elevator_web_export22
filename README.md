# تطبيق الجيل الحديث للأمن والمصاعد

## نظرة عامة
تطبيق الجيل الحديث للأمن والمصاعد هو نظام متكامل لإدارة عمليات شركة المصاعد، بما في ذلك إدارة العقود، الصيانة، المشتريات، والعمليات المالية.

## الميزات الرئيسية
- **نظام تسجيل الدخول**: نظام مصادقة آمن مع مستويات مختلفة من الصلاحيات
- **إدارة المصاعد**: تسجيل وتتبع حالة المصاعد
- **إدارة العقود**: إنشاء وإدارة عقود الصيانة والتركيب
- **إدارة طلبات الصيانة**: تسجيل ومتابعة طلبات الصيانة
- **إدارة المشتريات**: إدارة الموردين وأوامر الشراء
- **الإدارة المالية**: إصدار الفواتير وتتبع المدفوعات
- **إرسال المستندات**: إمكانية إرسال العقود وعروض الأسعار والسندات عبر البريد الإلكتروني والواتساب
- **طباعة المستندات**: طباعة جميع المستندات مع ختم الشركة
- **إعدادات النظام**: تخصيص بيانات الشركة ورفع الشعار والختم

## متطلبات النظام
- Python 3.8 أو أحدث
- Flask 2.0 أو أحدث
- SQLite (للتطوير) أو PostgreSQL (للإنتاج)
- متصفح ويب حديث

## التثبيت

### 1. تثبيت المكتبات المطلوبة
```bash
pip install -r requirements.txt
```

### 2. إعداد قاعدة البيانات
```bash
python -m src.setup_production
```

### 3. إنشاء حساب مسؤول
```bash
python -m src.create_new_admin
```

### 4. تشغيل التطبيق في بيئة التطوير
```bash
python -m src.main
```

### 5. تشغيل التطبيق في بيئة الإنتاج
```bash
gunicorn -c gunicorn_config.py wsgi:app
```

## الميزات الجديدة

### 1. إرسال المستندات عبر البريد الإلكتروني والواتساب

يمكن الآن إرسال المستندات التالية عبر البريد الإلكتروني أو مشاركتها عبر الواتساب:
- العقود
- عروض الأسعار
- الفواتير
- إيصالات الدفع

#### كيفية استخدام ميزة الإرسال:
1. انتقل إلى صفحة تفاصيل المستند (عقد، عرض سعر، فاتورة، إيصال)
2. اضغط على زر "إرسال" أو "مشاركة"
3. اختر طريقة الإرسال (بريد إلكتروني أو واتساب)
4. أدخل معلومات المستلم وأي رسالة إضافية
5. اضغط على "إرسال" لإتمام العملية

### 2. قسم المشتريات

تمت إضافة قسم جديد لإدارة المشتريات يتضمن:
- إدارة الموردين
- إنشاء وإدارة أوامر الشراء
- متابعة عمليات الاستلام
- تقارير وإحصائيات المشتريات

#### كيفية استخدام قسم المشتريات:
1. انتقل إلى قسم "المشتريات" من القائمة الرئيسية
2. يمكنك إضافة موردين جدد أو إدارة الموردين الحاليين
3. يمكنك إنشاء أوامر شراء جديدة وربطها بالموردين
4. يمكنك متابعة حالة أوامر الشراء وتسجيل عمليات الاستلام
5. يمكنك عرض تقارير وإحصائيات المشتريات

### 3. ختم الشركة في المستندات القابلة للطباعة

تمت إضافة ختم الشركة إلى جميع المستندات القابلة للطباعة:
- العقود
- عروض الأسعار
- أوامر الشراء
- الفواتير
- إيصالات الدفع

#### كيفية طباعة المستندات مع الختم:
1. انتقل إلى صفحة تفاصيل المستند
2. اضغط على زر "طباعة"
3. سيتم عرض نسخة المستند المخصصة للطباعة مع ختم الشركة
4. اضغط على زر "طباعة" في الصفحة أو استخدم اختصار الطباعة في المتصفح (Ctrl+P)

### 4. صفحة إعدادات النظام

تمت إضافة صفحة جديدة لإدارة إعدادات النظام تتيح:
- رفع وتغيير شعار الشركة
- رفع وتغيير ختم الشركة
- تعديل بيانات الشركة (الاسم، العنوان، الهاتف، البريد الإلكتروني، الموقع الإلكتروني)
- تعديل الرقم الضريبي والسجل التجاري
- تعديل البيانات المالية (اسم البنك، رقم الحساب، رقم الآيبان)

#### كيفية استخدام صفحة الإعدادات:
1. قم بتسجيل الدخول كمدير
2. انتقل إلى قسم "الإعدادات" من القائمة الرئيسية
3. استخدم التبويبات المختلفة للوصول إلى الإعدادات المطلوبة:
   - بيانات الشركة: لتعديل معلومات الشركة الأساسية
   - الشعار والختم: لرفع وتغيير شعار وختم الشركة
   - البيانات المالية: لتعديل معلومات الحسابات البنكية
4. قم بحفظ التغييرات بعد كل تعديل

## نظام تسجيل الدخول

### أنواع المستخدمين والصلاحيات:
- **مدير (admin)**: يمتلك جميع الصلاحيات في النظام
- **موظف (staff)**: يمكنه الوصول إلى معظم الوظائف باستثناء إدارة المستخدمين والإعدادات المتقدمة
- **فني (technician)**: يمكنه الوصول إلى طلبات الصيانة وتحديث حالتها

### إنشاء مستخدمين جدد:
1. قم بتسجيل الدخول كمدير
2. انتقل إلى قسم "المستخدمين" من القائمة الرئيسية
3. اضغط على "إضافة مستخدم جديد"
4. أدخل معلومات المستخدم وحدد نوع الحساب
5. اضغط على "حفظ" لإنشاء المستخدم

## الدعم والمساعدة

إذا واجهتك أي مشكلة أو كانت لديك أسئلة، يرجى التواصل مع فريق الدعم الفني:
- البريد الإلكتروني: support@aljeelalhadith.com
- الهاتف: +966 XXXXXXXXX
